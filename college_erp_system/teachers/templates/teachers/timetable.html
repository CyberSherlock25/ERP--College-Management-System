{% extends "base.html" %}
{% load static %}
{% block content %}
<h2>Your Timetable â€” {{ selected_year }}</h2>

<!-- Show the timetable image you provided for reference -->
<div style="margin-bottom:20px;">
	<p>Reference timetable (uploaded image):</p>
	<img src="{% static 'images/teacher_timetable_sample.png' %}" alt="Reference timetable" style="max-width:100%;height:auto;border:1px solid #ddd;padding:6px;background:#fff;">
</div>

<table class="table table-bordered">
	<thead>
		<tr>
			<th>Day / Time</th>
			{% for ts in time_slots %}
				<th>{{ ts.0|time:"H:i" }} - {{ ts.1|time:"H:i" }}</th>
			{% endfor %}
		</tr>
	</thead>
	<tbody>
		{% for day in days %}
			<tr>
				<td style="text-transform:capitalize;"><strong>{{ day }}</strong></td>
				{% for ts in time_slots %}
					<td>
						{% comment %} Find entries for this day and time range {% endcomment %}
						{% for entry in organized_timetable.day|get_item:day %}
							{% if entry.time_slot.start_time == ts.0 and entry.time_slot.end_time == ts.1 %}
								<div>
									<strong>{{ entry.subject.course.code }} - {{ entry.subject.course.name }}</strong><br/>
									<span>{{ entry.subject.name }} ({{ entry.subject.class_assigned }})</span>
								</div>
							{% endif %}
						{% endfor %}
						{# Fallback: show nothing #}
					</td>
				{% endfor %}
			</tr>
		{% endfor %}
	</tbody>
</table>
{% endblock %}
